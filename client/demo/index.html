<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>ProxyControls • Demo</title>
    <script src="https://aframe.io/releases/0.4.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v3.3.0/dist/aframe-extras.min.js"></script>
    <script src="https://cdn.rawgit.com/donmccurdy/aframe-proxy-controls/v0.6.0/dist/aframe-proxy-controls.min.js"></script>
    <script src="https://rawgit.com/polats/aframe-remote-phone-controls-component/master/dist/aframe-remote-phone-controls-component.min.js"></script>

    <style>
      .intro-overlay {
        z-index: 1;
        position: absolute;
        top: 20px;
        left: 20px;
        max-width: 280px;
        box-sizing: border-box;
        padding: 1.5em;

        color: #FFF;
        background: #222;
        font-family: Source Sans Pro, Helvetica Neue, Helvetica, Arial, sans-serif;
      }

      .intro-overlay-link {
        display: inline-block;
        float: right;
        padding: 0.3em 1em 0.35em;
        margin-top: 1em;

        text-decoration: none;
        color: #fff;
        background: #333;
      }

        .intro-overlay-link:hover { background: #444; }

      @media screen and (min-width: 550px) {
        .intro-overlay { max-width: 450px; }
      }

    </style>
  </head>
  <body>
    <a-scene>
      <!--
        Camera + Gamepad controls
        Button 0 is "A" on an Xbox controller.

        // phone-remote-controls="target: #cursor"
      -->
      <a-entity camera
                kinematic-body
                jump-ability
                position="0 1 0"
                universal-controls
                sound="src: /demo/assets/321103__nsstudios__blip1.wav;
                       on: gamepadbuttondown:0">
                       <a-entity remote-phone-controls>
                      </a-entity>
      </a-entity>

      <a-cursor id="cursor" geometry="primitive: ring; radius-outer: 0.2; radius-inner: 0.06" material="color: lightblue" opacity="0.7"></a-cursor>

      <a-assets>
          <a-asset-item id="tree1" src="demo/assets/tree1.dae"></a-asset-item>
          <a-asset-item id="tree2" src="demo/assets/tree2.dae"></a-asset-item>
          <a-asset-item id="roomObj" src="demo/assets/office.obj"></a-asset-item>
          <a-asset-item id="roomMtl" src="demo/assets/office.mtl"></a-asset-item>
      </a-assets>

      <!-- Ground -->
      <a-grid static-body></a-grid>

      <!-- Tower -->
      <a-box id="tower"
              color="#39BB82"
              width="10" height="5" depth="6"
              position="0 2.5 -15"
              static-body></a-box>

      <!-- Ramp -->
      <a-box id="ramp"
             color="#39BB82"
             width="1" height="10" depth="18.86796"
             position="0 -4.04 -6.33"
             rotation="30 0 0"
             static-body></a-box>

      <!-- Moving platforms -->
      <a-box id="platform1"
             color="#39BB82"
             width="4" height="0.25" depth="4"
             position="7 0.125 -15"
             velocity="0 0 0"
             toggle-velocity="axis: z; min: -5; max: 5;"
             static-body></a-box>
      <a-box id="platform2"
             color="#39BB82"
             width="4" height="0.25" depth="4"
             position="-7 0.125 -15"
             velocity="0 0 0"
             toggle-velocity="axis: y; min: 0.125; max: 5;"
             static-body></a-box>

      <!-- Blocks -->
      <a-box color="#39BB82"
             width="1" height="1" depth="1"
             position="15 2 0.6"
             dynamic-body></a-box>
      <a-box color="#39BB82"
             width="1" height="1" depth="1"
             position="15 2 -0.6"
             dynamic-body></a-box>
      <a-box color="#39BB82"
             width="1" height="1" depth="1"
             position="15 4 0"
             dynamic-body></a-box>
      <a-cylinder color="#39BB82"
             rotation="90 0 0"
             position="15 2 4"
             dynamic-body></a-cylinder>
      <a-sphere color="#39BB82"
             position="15 2 -4"
             dynamic-body></a-sphere>

      <!-- Lighting -->
      <a-light type="ambient" color="#bbb"></a-light>
      <a-light color="#ccc" position="0 30 0" distance="100" intensity="0.4" type="point"></a-light>
      <a-light color="#ccc" position="3 10 -10" distance="50" intensity="0.4" type="point"></a-light>

      <!--

      <a-entity id="room" obj-model="obj: #roomObj; mtl:#roomMtl" position="0 -1 0"></a-entity>

      <a-collada-model src="#tree1" position="1 0 -1" rotation="0 30 0" scale="1.4 1.4 1.4"></a-collada-model>
      <a-collada-model src="/demo/assets/tree2.dae" position="2.5 0 1.5" rotation="0 25 0" scale="1.4 1.4 1.4"></a-collada-model>
      <a-collada-model src="/demo/assets/tree2.dae" position="-2 0 -4" rotation="0 60 0" scale="1.5 1.5 1.5"></a-collada-model>
      <a-collada-model src="/demo/assets/tree1.dae" position="-8 0 -9" rotation="0 60 0" scale="1.4 1.4 1.4"></a-collada-model>
      <a-collada-model src="/demo/assets/tree2.dae" position="-12 0 3" rotation="0 60 0" scale="1.5 1.5 1.5"></a-collada-model>
      <a-collada-model src="/demo/assets/tree1.dae" position="-7 0 -3" rotation="0 60 0" scale="1.3 1.3 1.3"></a-collada-model>
      <a-collada-model src="/demo/assets/tree2.dae" position="-4 0 1" rotation="0 10 0" scale="1.4 1.4 1.4"></a-collada-model>
      <a-collada-model src="/demo/assets/tree1.dae" position="-5 0 5" rotation="0 45 0" scale="1.5 1.5 1.5"></a-collada-model>
      <a-collada-model src="/demo/assets/tree2.dae" position="0 0 9" rotation="0 220 0" scale="1.6 1.6 1.6"></a-collada-model>
      <a-collada-model src="/demo/assets/tree2.dae" position="-2 0 12" rotation="0 30 0" scale="1.4 1.4 1.4"></a-collada-model>
      <a-collada-model src="/demo/assets/tree1.dae" position="-7 0 10" rotation="0 30 0" scale="1.4 1.4 1.4"></a-collada-model>

      <a-sky src="/demo/assets/peach-gradient-1.jpg"></a-sky>

      <a-light type="ambient" color="#ccc"></a-light>
      <a-light color="#ddf" distance="100" intensity="0.4" type="point"></a-light>
      -->
    </a-scene>

    <div class="intro-overlay" style="display: none;">
      <p>Move around with WASD keys, ←↑→↓, or a USB gamepad.</p>
      <p>Pair code: “<span data-bind="pairCode"></span>”</p>
      <div><a href="javascript:void(0)" class="intro-overlay-link">Got it!</a></div>
    </div>

    <script>
      var scene = document.querySelector('a-scene'),
          proxyUrl = location.protocol + '//' + location.host;
      scene.setAttribute('proxy-controls', {proxyUrl: proxyUrl, enableOverlay: false});
      scene.addEventListener('proxycontrols.paircode', function (e) {
        var pairCode = e.detail.pairCode,
            overlay = document.querySelector('.intro-overlay'),
            overlayLink = document.querySelector('.intro-overlay-link');
        overlay.querySelector('[data-bind=pairCode]').textContent = pairCode;
        overlay.style.display = '';
        overlayLink.addEventListener('click', function () { overlay.remove(); });
      });
    </script>

  </body>
</html>
